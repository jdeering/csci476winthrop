<HTML>
<HEAD>
<TITLE>
main.cpp
</TITLE>
</HEAD>
<BODY>
<PRE>
<font color="blue">#ifndef</font> MAIN_CPP
<font color="blue">#define</font> MAIN_CPP

<font color="blue">#include</font> <font color="maroon">"globals.h"</font>
<font color="blue">#include</font> <font color="maroon">"../../../../Allegro Headers/allegro.h"</font>
<font color="blue">#include</font> <font color="maroon">"../../../../Allegro Headers/winalleg.h"</font>

<font color="blue">void</font> dialogueClickHandler<font color="black">(</font><font color="blue">int</font> x, <font color="blue">int</font> y, <font color="blue">void</font> <font color="black">(</font><font color="black">*</font>yesFunction<font color="black">)</font><font color="black">(</font><font color="black">)</font>, <font color="blue">void</font> <font color="black">(</font><font color="black">*</font>noFunction<font color="black">)</font><font color="black">(</font><font color="black">)</font><font color="black">)</font>
<font color="black">{</font>
    <font color="green">//if the user clicks yes</font>
    <font color="blue">if</font> <font color="black">(</font>x <font color="black">&#62;</font> <font color="maroon">50</font> <font color="black">&</font><font color="black">&</font> x <font color="black">&#60;</font> <font color="maroon">200</font> <font color="black">&</font><font color="black">&</font> y <font color="black">&#60;</font> <font color="maroon">400</font> <font color="black">&</font><font color="black">&</font> y <font color="black">&#62;</font> <font color="maroon">450</font> <font color="black">)</font>
    <font color="black">{</font>
        <font color="green">//call the yes function</font>
        yesFunction<font color="black">(</font><font color="black">)</font>;
    <font color="black">}</font>

    <font color="green">//if the user clicks no</font>
    <font color="blue">else</font> <font color="blue">if</font> <font color="black">(</font>x <font color="black">&#62;</font> <font color="maroon">300</font> <font color="black">&</font><font color="black">&</font> x <font color="black">&#60;</font> <font color="maroon">450</font> <font color="black">&</font><font color="black">&</font> y <font color="black">&#62;</font> <font color="maroon">400</font> <font color="black">&</font><font color="black">&</font> y <font color="black">&#60;</font> <font color="maroon">450</font><font color="black">)</font>
    <font color="black">{</font>
        <font color="green">//call the no function</font>
        noFunction<font color="black">(</font><font color="black">)</font>;
    <font color="black">}</font>
<font color="black">}</font>



<font color="blue">void</font> masterClickHandler<font color="black">(</font><font color="blue">int</font> button, <font color="blue">int</font> state, <font color="blue">int</font> x, <font color="blue">int</font> y<font color="black">)</font>
<font color="black">{</font>
    <font color="green">//dependent on status, choose the correct click handler</font>
    <font color="blue">if</font> <font color="black">(</font>currentState <font color="black">=</font><font color="black">=</font> CHOOSE_LEVEL<font color="black">)</font>
    <font color="black">{</font>
        introClickHandler<font color="black">(</font>x,y<font color="black">)</font>;
    <font color="black">}</font>
    <font color="blue">else</font> <font color="blue">if</font> <font color="black">(</font>currentState <font color="black">=</font><font color="black">=</font> INSTRUCTIONS_1<font color="black">)</font>
    <font color="black">{</font>
        instructionsClickHandler<font color="black">(</font>x, y, <font color="maroon">1</font><font color="black">)</font>;
    <font color="black">}</font>
    <font color="blue">else</font> <font color="blue">if</font> <font color="black">(</font>currentState <font color="black">=</font><font color="black">=</font> INSTRUCTIONS_2<font color="black">)</font>
    <font color="black">{</font>
        instructionsClickHandler <font color="black">(</font>x, y, <font color="maroon">2</font><font color="black">)</font>;
    <font color="black">}</font>
    <font color="blue">else</font> <font color="blue">if</font> <font color="black">(</font>currentState <font color="black">=</font><font color="black">=</font> IN_GAME<font color="black">)</font>
    <font color="black">{</font>
        inGameClickHandler<font color="black">(</font>x,y<font color="black">)</font>;
    <font color="black">}</font>
    <font color="blue">else</font> <font color="blue">if</font> <font color="black">(</font>currentState <font color="black">=</font><font color="black">=</font> DIALOGUE_EXIT<font color="black">)</font>
    <font color="black">{</font>
        dialogueClickHandler<font color="black">(</font>x, y, exitGame, endDialogue<font color="black">)</font>;
    <font color="black">}</font>
    <font color="blue">else</font> <font color="blue">if</font> <font color="black">(</font>currentState <font color="black">=</font><font color="black">=</font> DIALOGUE_RESET<font color="black">)</font>
    <font color="black">{</font>
        dialogueClickHandler<font color="black">(</font>x,y, resetBoard, endDialogue<font color="black">)</font>;
    <font color="black">}</font>
<font color="black">}</font>


<font color="blue">void</font> introClickHandler<font color="black">(</font><font color="blue">int</font> x, <font color="blue">int</font> y<font color="black">)</font>
<font color="black">{</font>

    <font color="green">//this will hold the game level the user selects</font>
    <font color="blue">int</font> gameLevel <font color="black">=</font> <font color="maroon">-1</font>;

    <font color="green">//if it's in the right y-value for a level button</font>
    <font color="blue">if</font><font color="black">(</font>y <font color="black">&#62;</font> <font color="maroon">400</font> <font color="black">&</font><font color="black">&</font> y <font color="black">&#60;</font> <font color="maroon">575</font><font color="black">)</font>
    <font color="black">{</font>

        <font color="green">//decide which level it is, and select that level</font>
        <font color="blue">if</font><font color="black">(</font>x <font color="black">&#62;</font> <font color="maroon">20</font> <font color="black">&</font><font color="black">&</font> x <font color="black">&#60;</font> <font color="maroon">145</font><font color="black">)</font>
        <font color="black">{</font>
            gameLevel <font color="black">=</font> <font color="maroon">1</font>;
        <font color="black">}</font>
        <font color="blue">else</font> <font color="blue">if</font> <font color="black">(</font>x <font color="black">&#62;</font> <font color="maroon">165</font> <font color="black">&</font><font color="black">&</font> x <font color="black">&#60;</font> <font color="maroon">290</font><font color="black">)</font>
        <font color="black">{</font>
            gameLevel <font color="black">=</font> <font color="maroon">2</font>;
        <font color="black">}</font>
        <font color="blue">else</font> <font color="blue">if</font> <font color="black">(</font>x <font color="black">&#62;</font> <font color="maroon">310</font> <font color="black">&</font><font color="black">&</font> x <font color="black">&#60;</font> <font color="maroon">435</font><font color="black">)</font>
        <font color="black">{</font>
            gameLevel <font color="black">=</font> <font color="maroon">3</font>;
        <font color="black">}</font>

        <font color="blue">else</font> <font color="blue">if</font> <font color="black">(</font>x <font color="black">&#62;</font> <font color="maroon">455</font> <font color="black">&</font><font color="black">&</font> x <font color="black">&#60;</font> <font color="maroon">580</font><font color="black">)</font>
        <font color="black">{</font>
            gameLevel <font color="black">=</font> <font color="maroon">4</font>;
        <font color="black">}</font>

        <font color="green">//as long as they clicked on a level button</font>
        <font color="blue">if</font> <font color="black">(</font>gameLevel <font color="black">!</font><font color="black">=</font> <font color="maroon">-1</font><font color="black">)</font><font color="black">{</font>
            <font color="green">//go ahead and show instructions for that level</font>

            <font color="green">//construct the gameboard and the dictionary</font>
            makeDictionary<font color="black">(</font><font color="black">)</font>;
            constructBoard<font color="black">(</font>gameLevel<font color="black">)</font>;

            showInstructions<font color="black">(</font>gameLevel, <font color="maroon">1</font><font color="black">)</font>;     <font color="green">//that 1 tells us to show the first page of the instructions</font>
        <font color="black">}</font>
    <font color="black">}</font>
<font color="black">}</font>

<font color="blue">void</font> instructionsClickHandler<font color="black">(</font><font color="blue">int</font> x, <font color="blue">int</font> y, <font color="blue">int</font> instructionsPage<font color="black">)</font><font color="black">{</font>
    <font color="green">//if we're on the second instructions page, there's a begin game and previous page button</font>
    <font color="blue">if</font> <font color="black">(</font>instructionsPage <font color="black">=</font><font color="black">=</font> <font color="maroon">2</font><font color="black">)</font><font color="black">{</font> 
        <font color="green">//if it's the begin game button </font>
        <font color="blue">if</font><font color="black">(</font>x <font color="black">&#62;</font> <font color="maroon">335</font> <font color="black">&</font><font color="black">&</font> x <font color="black">&#60;</font> <font color="maroon">550</font> <font color="black">&</font><font color="black">&</font> y <font color="black">&#62;</font> <font color="maroon">505</font> <font color="black">&</font><font color="black">&</font> y <font color="black">&#60;</font> <font color="maroon">550</font><font color="black">)</font>
        <font color="black">{</font>
            beginGame<font color="black">(</font><font color="black">)</font>;
        <font color="black">}</font>

        <font color="green">//if it's the previous button</font>
        <font color="blue">else</font> <font color="blue">if</font><font color="black">(</font>x <font color="black">&#62;</font> <font color="maroon">40</font> <font color="black">&</font><font color="black">&</font> x <font color="black">&#60;</font> <font color="maroon">170</font> <font color="black">&</font><font color="black">&</font> y <font color="black">&#62;</font> <font color="maroon">505</font> <font color="black">&</font><font color="black">&</font> y <font color="black">&#60;</font> <font color="maroon">550</font><font color="black">)</font>
        <font color="black">{</font>
            showInstructions<font color="black">(</font>gameBoard<font color="black">-</font><font color="black">&#62;</font>returnLevel<font color="black">(</font><font color="black">)</font>, <font color="maroon">1</font><font color="black">)</font>;
        <font color="black">}</font>
    <font color="black">}</font>

    <font color="green">//if we're on the first instructions page, there's a next button</font>
    <font color="blue">else</font><font color="black">{</font>
        <font color="green">//if it's the 'next' button</font>
        <font color="blue">if</font> <font color="black">(</font>x <font color="black">&#62;</font> <font color="maroon">420</font> <font color="black">&</font><font color="black">&</font> x <font color="black">&#60;</font> <font color="maroon">545</font> <font color="black">&</font><font color="black">&</font> y <font color="black">&#62;</font> <font color="maroon">505</font> <font color="black">&</font><font color="black">&</font> y <font color="black">&#60;</font> <font color="maroon">550</font><font color="black">)</font>
        <font color="black">{</font>
            showInstructions<font color="black">(</font>gameBoard<font color="black">-</font><font color="black">&#62;</font>returnLevel<font color="black">(</font><font color="black">)</font>, <font color="maroon">2</font><font color="black">)</font>;
        <font color="black">}</font>
    <font color="black">}</font>
<font color="black">}</font>

<font color="blue">void</font> inGameClickHandler<font color="black">(</font><font color="blue">int</font> x, <font color="blue">int</font> y<font color="black">)</font>
<font color="black">{</font>
    <font color="green">//if it's anywhere in the board, let it be handled there</font>
    <font color="blue">if</font><font color="black">(</font>x <font color="black">&#62;</font><font color="black">=</font> <font color="maroon">25</font> <font color="black">&</font><font color="black">&</font> x <font color="black">&#60;</font><font color="black">=</font> <font color="maroon">475</font> <font color="black">&</font><font color="black">&</font> y <font color="black">&#62;</font> <font color="maroon">25</font> <font color="black">&</font><font color="black">&</font> y <font color="black">&#60;</font><font color="black">=</font><font color="maroon">475</font><font color="black">)</font>
    <font color="black">{</font>
        gameboardClickHandler<font color="black">(</font>x,y<font color="black">)</font>;
    <font color="black">}</font>

    <font color="green">//if it's the submit word button</font>
    <font color="blue">else</font> <font color="blue">if</font><font color="black">(</font>x <font color="black">&#62;</font> <font color="maroon">475</font> <font color="black">&</font><font color="black">&</font> x <font color="black">&#60;</font> <font color="maroon">575</font> <font color="black">&</font><font color="black">&</font> y <font color="black">&#62;</font> <font color="maroon">525</font> <font color="black">&</font><font color="black">&</font> y <font color="black">&#60;</font> <font color="maroon">575</font><font color="black">)</font>
    <font color="black">{</font>
        <font color="green">//let the board class handle it through this function</font>
        submitWord<font color="black">(</font><font color="black">)</font>;
    <font color="black">}</font>
    
    <font color="green">//if it's the reset board button</font>
    <font color="blue">else</font> <font color="blue">if</font><font color="black">(</font>x <font color="black">&#62;</font> <font color="maroon">510</font> <font color="black">&</font><font color="black">&</font> x <font color="black">&#60;</font> <font color="maroon">590</font> <font color="black">&</font><font color="black">&</font> y <font color="black">&#62;</font> <font color="maroon">130</font> <font color="black">&</font><font color="black">&</font> y <font color="black">&#60;</font> <font color="maroon">160</font><font color="black">)</font>
    <font color="black">{</font>
        dialogueBox<font color="black">(</font><font color="maroon">"reset"</font><font color="black">)</font>;
    <font color="black">}</font>

    <font color="green">//if it's the end game button</font>
    <font color="blue">else</font> <font color="blue">if</font> <font color="black">(</font>x <font color="black">&#62;</font> <font color="maroon">510</font> <font color="black">&</font><font color="black">&</font> x <font color="black">&#60;</font> <font color="maroon">590</font> <font color="black">&</font><font color="black">&</font> y <font color="black">&#62;</font> <font color="maroon">180</font> <font color="black">&</font><font color="black">&</font> y <font color="black">&#60;</font> <font color="maroon">210</font><font color="black">)</font>
    <font color="black">{</font>
        dialogueBox<font color="black">(</font><font color="maroon">"end"</font><font color="black">)</font>;
    <font color="black">}</font>
<font color="black">}</font>
<font color="blue">void</font> gameboardClickHandler<font color="black">(</font><font color="blue">int</font> x, <font color="blue">int</font> y<font color="black">)</font><font color="black">{</font>
    <font color="green">//handle inside of the gameboard</font>
    gameBoard<font color="black">-</font><font color="black">&#62;</font>clickHandler<font color="black">(</font>x,y<font color="black">)</font>;
<font color="black">}</font>
<font color="blue">void</font> dialogueBox<font color="black">(</font>string <font color="blue">name</font><font color="black">)</font>
<font color="black">{</font>
    <font color="green">//clear out the screen</font>
    removeAllButGameboard<font color="black">(</font><font color="black">)</font>;

    string assetName;
    <font color="green">//construct asset name based on the parameter passed in, and set the game sate</font>
    <font color="blue">if</font> <font color="black">(</font><font color="blue">name</font> <font color="black">=</font><font color="black">=</font> <font color="maroon">"reset"</font><font color="black">)</font>
    <font color="black">{</font>
        assetName <font color="black">=</font> <font color="maroon">"reset"</font>;    
        currentState <font color="black">=</font> DIALOGUE_RESET;
    <font color="black">}</font>
    <font color="blue">else</font> <font color="blue">if</font> <font color="black">(</font><font color="blue">name</font> <font color="black">=</font><font color="black">=</font> <font color="maroon">"end"</font><font color="black">)</font>
    <font color="black">{</font>
        assetName <font color="black">=</font> <font color="maroon">"endgame"</font>;
        currentState <font color="black">=</font> DIALOGUE_EXIT;
    <font color="black">}</font>

    assetName <font color="black">+</font><font color="black">=</font> <font color="maroon">".bmp"</font>;

    <font color="green">//display the dialogue screen</font>
    overlays.push_back<font color="black">(</font>framework.createSprite<font color="black">(</font>assetName, <font color="maroon">0</font>, <font color="maroon">0</font>, <font color="maroon">600</font>, <font color="maroon">600</font><font color="black">)</font><font color="black">)</font>;
<font color="black">}</font>

<font color="blue">void</font> showInstructions<font color="black">(</font><font color="blue">int</font> gameLevel, <font color="blue">int</font> page<font color="black">)</font>
<font color="black">{</font>
    <font color="green">//clear out the screen</font>
    removeAllButGameboard<font color="black">(</font><font color="black">)</font>;

    string assetName;

    <font color="green">//construct the asset name based on the game level and the page number</font>
    <font color="blue">switch</font> <font color="black">(</font>gameLevel<font color="black">)</font>
    <font color="black">{</font>
        <font color="blue">case</font> <font color="maroon">1</font><font color="black">:</font>
            assetName <font color="black">=</font> <font color="maroon">"easy_"</font>;
            <font color="blue">break</font>;
        <font color="blue">case</font> <font color="maroon">2</font><font color="black">:</font>
            assetName <font color="black">=</font> <font color="maroon">"medium_"</font>;
            <font color="blue">break</font>;
        <font color="blue">case</font> <font color="maroon">3</font><font color="black">:</font>
            assetName <font color="black">=</font> <font color="maroon">"hard_"</font>;
            <font color="blue">break</font>;
        <font color="blue">case</font> <font color="maroon">4</font><font color="black">:</font>
            assetName <font color="black">=</font> <font color="maroon">"challenge_"</font>;
            <font color="blue">break</font>;
    <font color="black">}</font>

    assetName <font color="black">+</font><font color="black">=</font> page;

    <font color="green">//and display it</font>
    overlays.push_back<font color="black">(</font>framework.createSprite<font color="black">(</font>assetName, <font color="maroon">0</font>, <font color="maroon">0</font>, <font color="maroon">600</font>, <font color="maroon">600</font><font color="black">)</font><font color="black">)</font>;

    <font color="green">//set the game state to be in the instructions state</font>
    <font color="blue">switch</font> <font color="black">(</font>page<font color="black">)</font>
    <font color="black">{</font>
        <font color="blue">case</font> <font color="maroon">1</font><font color="black">:</font>
            currentState <font color="black">=</font> INSTRUCTIONS_1;
            <font color="blue">break</font>;
        <font color="blue">case</font> <font color="maroon">2</font><font color="black">:</font>
            currentState <font color="black">=</font> INSTRUCTIONS_2;
            <font color="blue">break</font>;
    <font color="black">}</font>
<font color="black">}</font>

<font color="green">//remove any sprites that are currently up on the screen besides the game board</font>
<font color="blue">void</font> removeAllButGameboard<font color="black">(</font><font color="black">)</font>
<font color="black">{</font>
    <font color="blue">while</font> <font color="black">(</font>overlays.size<font color="black">(</font><font color="black">)</font> <font color="black">&#62;</font> <font color="maroon">0</font><font color="black">)</font>
    <font color="black">{</font>
        framework.removeSprite<font color="black">(</font>overlays.back<font color="black">(</font><font color="black">)</font><font color="black">)</font>;
        overlays.pop_back<font color="black">(</font><font color="black">)</font>;
    <font color="black">}</font>
<font color="black">}</font>

<font color="blue">void</font> endDialogue<font color="black">(</font><font color="black">)</font>
<font color="black">{</font>
    <font color="green">//remove the dialogue box</font>
    removeAllButGameboard<font color="black">(</font><font color="black">)</font>;

    <font color="green">//reset the game state back to gameplay</font>
    currentState <font color="black">=</font> IN_GAME;
<font color="black">}</font>

<font color="blue">void</font> updateScore<font color="black">(</font><font color="black">)</font>
<font color="black">{</font>
    <font color="green">//api</font>
<font color="black">}</font>

<font color="blue">void</font> updateCurrentWord<font color="black">(</font><font color="black">)</font>
<font color="black">{</font>
    <font color="green">/////api</font>
<font color="black">}</font>




<font color="blue">void</font> constructBoard<font color="black">(</font><font color="blue">int</font> level<font color="black">)</font>
<font color="black">{</font>
    <font color="green">//make the new gameboard dependent on the level passed in and the new user dictionary</font>
    gameBoard <font color="black">=</font> <font color="blue">new</font> Board<font color="black">(</font>level, userDictionary<font color="black">)</font>;
<font color="black">}</font>

<font color="blue">void</font> makeDictionary<font color="black">(</font><font color="black">)</font>
<font color="black">{</font>
    <font color="green">//make a new user dictionary</font>
    userDictionary <font color="black">=</font> <font color="blue">new</font> Dictionary<font color="black">(</font><font color="maroon">"dictionary.txt"</font><font color="black">)</font>;

<font color="black">}</font>

<font color="blue">void</font> beginGame<font color="black">(</font><font color="black">)</font>
<font color="black">{</font>
    <font color="green">//display the background</font>
    overlays.push_back<font color="black">(</font>framework.createSprite<font color="black">(</font><font color="maroon">"background"</font>, <font color="maroon">0</font>, <font color="maroon">0</font>, <font color="maroon">600</font>, <font color="maroon">600</font><font color="black">)</font><font color="black">)</font>;

    <font color="green">//display the gameboard</font>
    gameBoard<font color="black">-</font><font color="black">&#62;</font>displayBoard<font color="black">(</font><font color="black">)</font>;

    <font color="green">//display the user score and current word text fields</font>
    <font color="green">//GFText& createTextFromString(std::string, int, int, int);</font>
    currentWord <font color="black">=</font> <font color="black">&</font>framework.createTextFromString<font color="black">(</font><font color="maroon">""</font>,<font color="maroon">35</font>,<font color="maroon">535</font>,<font color="maroon">40</font><font color="black">)</font>;
    gScore <font color="black">=</font> <font color="black">&</font>framework.createTextFromString<font color="black">(</font><font color="maroon">"0"</font>, <font color="maroon">490</font>, <font color="maroon">315</font>, <font color="maroon">20</font><font color="black">)</font>;

    <font color="green">//set the state of the game</font>
    currentState <font color="black">=</font> IN_GAME;
<font color="black">}</font>

<font color="blue">void</font> exitGame<font color="black">(</font><font color="black">)</font>
<font color="black">{</font>
    <font color="green">//send the score back to the framework</font>
    <font color="green">/////api</font>

    <font color="green">//end game</font>
<font color="black">}</font>

<font color="blue">void</font> resetBoard<font color="black">(</font><font color="black">)</font>
<font color="black">{</font>
    <font color="green">///**** not implemented yet</font>

    <font color="green">//reset the board </font>
    <font color="green">//gameBoard-&#62;reset();</font>

    <font color="green">//update the score</font>
    score <font color="black">=</font> score <font color="maroon">-50</font>;

    <font color="green">//update the score and current word</font>
    updateScore<font color="black">(</font><font color="black">)</font>;
    updateCurrentWord<font color="black">(</font><font color="black">)</font>;
<font color="black">}</font>

<font color="blue">void</font> submitWord<font color="black">(</font><font color="black">)</font>
<font color="black">{</font>
    <font color="green">//submit and score the word</font>
    <font color="blue">int</font> wordScore;
    wordScore <font color="black">=</font> gameBoard<font color="black">-</font><font color="black">&#62;</font>submitWord<font color="black">(</font><font color="black">)</font>;

    <font color="green">//add to the current score</font>
    score <font color="black">=</font> score <font color="black">+</font> wordScore;

    <font color="green">//update the score and current word</font>
    updateScore<font color="black">(</font><font color="black">)</font>;
    updateCurrentWord<font color="black">(</font><font color="black">)</font>;
<font color="black">}</font>

<font color="blue">void</font> main<font color="black">(</font><font color="black">)</font><font color="black">{</font>
    GameFramework <font color="black">*</font>fw;
    <font color="green">//display the beginning screen</font>
    <font color="green">//GFSprite& createSprite(std::string, int, int, int, int);</font>
    <font color="green">/////api</font>
    overlays.push_back<font color="black">(</font>framework.createSprite<font color="black">(</font><font color="maroon">"intro"</font>, <font color="maroon">0</font>, <font color="maroon">0</font>, <font color="maroon">600</font>, <font color="maroon">600</font><font color="black">)</font><font color="black">)</font>;

    <font color="green">//set the correct click handler</font>
    <font color="green">//  void mouseFunc(void (*f)(int, int, int, int));</font>
    <font color="green">//***can't figure this out :(</font>
    fw<font color="black">-</font><font color="black">&#62;</font>mouseFunc<font color="black">(</font>masterClickHandler<font color="black">)</font>;


    <font color="green">//and wait on the user to make their move!</font>

<font color="black">}</font>

<font color="blue">#endif</font>
</PRE>
</BODY>
</HTML>
